<canvas id="gc" width="960" height="720"></canvas>
<script>
window.onload=function() {
	canv=document.getElementById("gc");
	ctx=canv.getContext("2d");
	document.addEventListener("keydown", keyPush);
	game();
	setInterval(imgupdate, 1000/15);
}

px=py=5;
gs=tc=40;
xv=yv=0;
ax=ay=1;
tail=5;
var img = new Image;
im="cdown.png";
function imgupdate(){
	img.src = im;
	ctx.drawImage(img, px*gs, py*gs,gs-2,gs-2);
}
function game(){
	ctx.fillStyle="black";
	ctx.fillRect(0,0,canv.width,canv.height);
	img.src = im;
	ctx.drawImage(img, px*gs, py*gs,gs-2,gs-2);
	if(ax==px && ay==py){
		tail++;
		ax=Math.floor(Math.random()*tc);
		ay=Math.floor(Math.random()*tc);
	}
	ctx.fillStyle="red";
	ctx.fillRect(ax*gs, ay*gs, gs-2, gs-2);
}
function keyPush(evt){
	switch(evt.keyCode) {
		case 37:
			px-=1;
			im="cleft.png";
			break;
		case 38:
			py-=1;
			im="cup.png";
			break;
		case 39:
			px+=1;
			im="cright.png";
			break;
		case 40:
			py+=1;
			im="cdown.png";
			break;
	}
	game();
}
</script>
